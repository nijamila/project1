{% extends 'base.html' %}
{% block title %}My Support Messages{% endblock %}

{% block content %}
<div style="max-width:800px; margin:40px auto;">
    <h2>My Support Messages</h2>

    <a href="{% url 'support' %}" style="display:inline-block; margin-bottom:20px; padding:8px 16px; background:#3b82f6; color:#fff; border-radius:6px; text-decoration:none;">New Message</a>

    {% if messages %}
        <ul style="list-style:none; padding:0;">
            {% for msg in messages %}
            <li style="margin-bottom:20px; padding:20px; border-radius:10px; background:#f3f4f6; box-shadow:0 4px 10px rgba(0,0,0,0.05);">
                <p><strong>You wrote:</strong></p>
                <p style="margin:5px 0;">{{ msg.message }}</p>
                <p style="font-size:12px; color:#6b7280;">Sent at: {{ msg.created_at|date:"Y-m-d H:i" }}</p>

                {% if msg.reply %}
                <div style="margin-top:10px; padding:10px; background:#e0f2fe; border-left:4px solid #3b82f6; border-radius:6px;">
                    <p><strong>Admin replied:</strong></p>
                    <p style="margin:5px 0;">{{ msg.reply }}</p>
                    <p style="font-size:12px; color:#2563eb;">Replied at: {{ msg.replied_at|date:"Y-m-d H:i" }}</p>
                </div>
                {% else %}
                <p style="margin-top:10px; font-size:13px; color:#9ca3af;">Waiting for admin reply...</p>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>You have not sent any support messages yet.</p>
    {% endif %}
</div>
{% endblock %}

